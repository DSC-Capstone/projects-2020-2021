import numpy as np
import pandas as pd
import os
from PIL import Image
from wordcloud import WordCloud, STOPWORDS, ImageColorGenerator
import wikipedia
import matplotlib.pyplot as plt

text1=wikipedia.page("Coronavirus").content
textJH = "Global Confirmed 109,377,180 Global Deaths 2,414,570 \
        U.S. Confirmed 27,731,625 U.S. Deaths 487,495 Global Map \
        U.S. Map DATA IN MOTION COVID-19 Data in Motion: Tuesday, \
        February 16, 2021 A 60-second, daily summary of \
        the most important data on COVID-19 in the U.S., \
        updated every morning.BY REGION See the latest data in your region Explore stats and trends specific to your country or U.S. state STATE TIMELINE Impact of \
        opening and closing decisions by state A look at how social distancing measures may have influenced trends in COVID-19 cases and deaths TESTING TRENDS TOOL \
        Track trends in COVID-19 cases and tests VACCINES Understand timelines, safety, and development for COVID-19 vaccines. Understanding Vaccination Progress \
        by U.S. State Explore Vaccination Progress by U.S. State International Vaccination Efforts Explore Vaccination Progress by Country NEW The Virus’s Gambit; \
        The Vaccine Response Two Doses or One? COVID-19 Vaccine Regimens COVID-19 Vaccines Are Rolling Out. Should I Be Worried? Economics of COVID-19 Vaccines \
        TRACKING Follow global cases and trends. WEEKLY HOSPITALIZATION TRENDS What is the trend in COVID-19 related hospitalizations? A look at the 7-day trend in \
        overall and Covid-19-specific. hospitalization occupancy data NEW CASES OF COVID-19 IN US STATES Where are cases rising? See if new cases are rising or \
        declining as states reopen. TESTING Providing public access to COVID-19 testing data, resources, and expert analysis TESTING TRACKER See changes \
        in new cases and testing capacity in all 50 states Understanding COVID-19 outbreaks across U.S. states and regions based on three important metrics. TESTING \
        TRACKER New tests per 100k people A state-by-state comparison. TESTING TRACKER Have new tests declined from previous week? A state-level look at weekly changes in testing rates. TESTING TRACKER Percent of new tests that are positive See which states meet or exceed test positivity rates recommended by the World Health Organization. CONTACT TRACING Resources and Expert Guidance for Tracing the COVID-19 Pandemic COVID-19 Contact Tracing: A course from Johns Hopkins The COVID-19 crisis has created an unprecedented need for contact tracing across the country, requiring thousands of people to learn key skills quickly. The job qualifications for contact tracing positions differ throughout the country and the world, with some new positions open to individuals with a high school diploma or equivalent.Johns Hopkins Bloomberg School of Public Health: Monitoring and Evaluating Contact Tracing Programs Contact tracing courses, metrics and tools from the Bloomberg School of Public Health. Johns Hopkins Bloomberg School of Public Health: ConTESSA An interactive tool that supplements the Measuring and Maximizing Impact of COVID-19 Contact Tracing Coursera course. This tool can be used to estimate the impact of a contact tracing program on transmission and strategize how to increase it. Johns Hopkins Bloomberg School of Public Health: COVID-19 Resources for Practitioners This website offers a centralized collection of publicly available COVID-19 resources for public health agencies and other organizations. E-LEARNING: UNDERSTANDING THE COVID-19 PANDEMIC Describe characteristics of the COVID-19 disease, including how it is diagnosed and treated Understand the development of the COVID-19 pandemic, and emerging trends throughout the world Discuss societal challenges raised by COVID-19 and opportunities to address them Virology, Coronaviruses, and COVID-19 Diagnosing, Treating, and Preventing COVID-19 Medical Therapies and Vaccines in Development Epidemiology: Understanding the Spread of COVID-19 Take Online Course LATEST NEWS & RESOURCES WEBCASTS The Johns Hopkins 30-Minute COVID-19 Briefing: Expert Insights on What You Need to Know Now Friday ET Join experts from the Johns Hopkins Coronavirus Resource Center (CRC) at 12pm ET on Fridays for timely, accessible updates on the state of the pandemic and the public health response. NEW The Atlantic: The unlikeliest pandemic success story On January 7, Bhutan recorded the very first coronavirus death in the country since the pandemic began. NEW NEWS NPR: Does loose enforcement of vaccine eligibility rules encourage line-jumping? Technical issues and relying on the honor system are some of the reasons why ineligible people are getting vaccines across the country.NEWS Voice of America: Don't panic, the COVID-19 shots still work The news about Janssen Pharmaceuticals coronavirus vaccine was disappointing. But those headline efficacy figures obscure an important point: Against the most serious cases, the shot was very effective. NEWS NPR: COVID cases finally are falling. Experts worry variants could erase that. Coronavirus variants are spreading in the United States, threatening to spark yet a new surge. Is there a good defense? WEBCASTS The Johns HopkinsCOVID-19 Briefing: Expert Insights on What You Need to Know Now Friday Join experts the Johns Hopkins Coronavirus Resource Center (CRC) at 12pm ET on Fridays for timely, accessible updates on the state of the pandemic and the public health response. NEWS Bloomberg: Latest COVID-19 vaccine updates Dr. William Moss, executive director of the International Vaccine Access Center at the Johns Hopkins Bloomberg School of Public Health, provides a coronavirus and vaccine update. EXPERTS USA Today: COVID won’t be last pathogen to threaten our national security. We need to prepare better. These SARS-CoV2 variants will not be the last to emerge, just as the novel coronavirus will not be the last pathogen to threaten the national security of the United States. NEWS USA Today: Cutting, bribing, stealing: Some people are getting COVID-19 vaccines before it’s their turn More than a month since the U.S. first began administering COVID-19 vaccines, many people who were not supposed to be first in line have received vaccinations. NEWS Reuters: Vaccine dose count caught up in data discrepancies, community health centers say Some U.S. community health centers say they are doling out COVID-19 shots far faster than government data suggests, likely accounting for some of a gap between how states and the federal government describe the availability of vaccine doses. NEWS New York Times: Why US vaccine numbers took a dip and why it might not mean much For the first time in a week, the seven-day average for daily new reported vaccinations given to Americans declined. Experts explain why there's no reason to panic. NEWS The Washington Post: Worrisome coronavirus mutation seen in U.K. variant and in some U.S. samples A coronavirus mutation that appears to limit the protection of vaccines against infection has appeared in the United Kingdom, which is already struggling with a highly transmissible and apparently more lethal virus variant. EXPERTS Nature: Rethink how we plan research to shrink COVID health disparities As many nations mark a year of deaths COVID-19, all must reflect on a shaming fact: minority racial and ethnic communities have lost the most. NEWS Bloomberg: U.S. hits pandemic milestone with more vaccinated than cases More Americans have received at least one dose of a COVID-19 vaccine than have tested positive for the virus, an early but hopeful milestone in the race to end the pandemic. WEBCASTS The Johns Hopkins 30-Minute COVID-19 Briefing: Expert Insights on What You Need to Know Now Friday January ET Join experts the Johns Hopkins Coronavirus Resource Center (CRC) at on Fridays for timely, accessible updates on the state of the pandemic and the public health response."
textWHO = "The world is in the midst of a COVID-19 pandemic. As WHO and partners work together on the response -- tracking the pandemic, advising on critical interventions, distributing vital medical supplies to those in need--- they are racing to develop and deploy safe and effective vaccines. Vaccines save millions of lives each year. Vaccines work by training and preparing the body’s natural defences --- the immune system--- to recognize and fight off the viruses and bacteria they target. If the body is exposed to those disease-causing germs later, the body is immediately ready to destroy them, preventing illness.There are currently more than 60 COVID-19 vaccine candidates in clinical development and over 170 in pre-clinical development. WHO is working in collaboration with scientists, business, and global health organizations through the ACT Accelerator to speed up the pandemic response. When a safe and effective vaccine is found, COVAX (led by WHO, GAVI and CEPI) will facilitate the equitable access and distribution of these vaccines to protect people in all countries. People most at risk will be prioritized. While we work towards rolling out a safe and effective vaccine fairly, we must continue the essential public health actions to suppress transmission and reduce mortality. Why are there so many vaccines in development? Typically, many vaccine candidates will be evaluated before any are found to be both safe and effective. For example, of all the vaccines that are studied in the lab and laboratory animals, roughly 7 out of every 100 will be considered good enough to move into clinical trials in humans. Of the vaccines that do make it to clinical trials, just one in five is successful. Having lots of different vaccines in development increases the chances that there will be one or more successful vaccines that will be shown to be safe and efficacious for the intended prioritized populations.Vaccines Topics Four images working 01The different types of vaccinesThere are three main approaches to designing a vaccine. Their differences lie in whether they use a whole virus or bacterium; just the parts of the germ that triggers the immune system; or just the genetic material that provides the instructions for making specific proteins and not the whole virus.Vaccines Topics Four images working 02 The whole-microbe approach Inactivated vaccine The first way to make a vaccine is to take the disease-carrying virus or bacterium, or one very similar to it, and inactivate or kill it using chemicals, heat or radiation. This approach uses technology that’s been proven to work in people – this is the way the flu and polio vaccines are made – and vaccines can be manufactured on a reasonable scale. However, it requires special laboratory facilities to grow the virus or bacterium safely, can have a relatively long production time, and will likely require two or three doses to be administered. Live-attenuated vaccine A live-attenuated vaccine uses a living but weakened version of the virus or one that’s very similar. The measles, mumps and rubella (MMR) vaccine and the chickenpox and shingles vaccine are examples of this type of vaccine. This approach uses similar technology to the inactivated vaccine and can be manufactured at scale. However, vaccines like this may not be suitable for people with compromised immune systems.Viral vector vaccineThis type of vaccine uses a safe virus to deliver specific sub-parts – called proteins – of the germ of interest so that it can trigger an immune response without causing disease. To do this, the instructions for making particular parts of the pathogen of interest are inserted into a safe virus. The safe virus then serves as a platform or vector to deliver the protein into the body. The protein triggers the immune response. The Ebola vaccine is a viral vector vaccine and this type can be developed rapidly.The subunit approachVaccines Topics Four images working 03A subunit vaccine is one that only uses the very specific parts (the subunits) of a virus or bacterium that the immune system needs to recognize. It doesn't contain the whole microbe or use a safe virus as a vector. The subunits may be proteins or sugars. Most of the vaccines on the childhood schedule are subunit vaccines, protecting people from diseases such as whooping cough, tetanus, diphtheria and meningococcal meningitis.Vaccines Topics Four images working 04The genetic approach (nucleic acid vaccine)Unlike vaccine approaches that use either a weakened or dead whole microbe or parts of one, a nucleic acid vaccine just uses a section of genetic material that provides the instructions for specific proteins, not the whole microbe. DNA and RNA are the instructions our cells use to make proteins. In our cells, DNA is first turned into messenger RNA, which is then used as the blueprint to make specific proteins. Vaccines Topics Four images working 05 DNA RNA v2A nucleic acid vaccine delivers a specific set of instructions to our cells, either as DNA or mRNA, for them to make the specific protein that we want our immune system to recognize and respond to. The nucleic acid approach is a new way of developing vaccines. Before the COVID-19 pandemic, none had yet been through the full approvals process for use in humans, though some DNA vaccines, including for particular cancers, were undergoing human trials. Because of the pandemic, research in this area has progressed very fast and some mRNA vaccines for COVID-19 are getting emergency use authorization, which means they can now be given to people beyond using them only in clinical trials."

def generate_cloud(text, output,name):
    wordcloud = WordCloud().generate(text)
    if not os.path.exists(output):
        os.makedirs(output)
    namer=name+'.png'
    pather=os.path.join(output,namer)
    
    wordcloud.to_file(pather)

    return

def generate_cloud_pink(text, output,name):
    stopwords = set(text.split(" "))

    wordcloud = WordCloud(stopwords=stopwords, background_color="lightpink").generate(text)
    if not os.path.exists(output):
        os.makedirs(output)
    namer=name+'_pink.png'
    pather=os.path.join(output,namer)
    
    wordcloud.to_file(pather)

    return
def gener(output):
    generate_cloud(text1, output,'Wikipeda')
    generate_cloud_pink(text1, output,'Wikipedia')
    generate_cloud(textJH, output,'JHU')
    generate_cloud_pink(textJH, output,'JHU')
    generate_cloud(textWHO, output,'WHO')
    generate_cloud_pink(textWHO, output,'WHO')
    return